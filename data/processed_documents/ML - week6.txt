

PROBABILITY OF DEFAULT (PD) MODELING – LOAN RISK ASSESSMENT

Presentation By: Laman Asgarova

Introduction
Objective:
Develop a binary classification machine learning model to estimate the probability that a borrower will default on a loan, based on demographic, financial, and credit history features.
This model supports:
       - Credit decisioning and risk-based pricing
       - Loan portfolio monitoring
       - Risk-adjusted marketing or approval thresholds
Dataset: 
Simulated loan application dataset


Dataset overview
Dataset consists of 50000 rows, and 22 columns
Some columns have null values
Total memory usage: 8.4 MB
9 categorical, 13 numerical columns

Data preparation
Missing Values:
Null values imputed using median values for numeric columns.
Duplicated rows deleted keeping first observation.
Encoding:
Binary encoding for categorical variables like gender.
One-hot encoding for education, loan purpose, and other nominal features.
Outlier Treatment:
 The Interquartile Range (IQR) method is applied to identify and cap extreme values without removing them. 




Exploratory Data Analysis (EDA)
The chart shows a clear negative relationship between credit score and default rate. Borrowers with poor credit scores (<600) have the highest default rate, exceeding 45%, while those in the excellent range (800+) exhibit the lowest default rate at around 33%. The trend is consistent across buckets, with default rates gradually declining as creditworthiness improves. This pattern confirms that credit score is a strong predictor of loan repayment behavior, aligning with established credit risk assessment principles.





Feature Engineering
Fico bucket: 
Customers were grouped into credit score range.
Loan to income ratio:
 Proportion of the loan amount to the bor rower’s annual income
High risk categories:
 Categorical flag identifying loan purposes historically asso ciated with higher default rates





Model Evaluation
Models Implemented:
Logistic Regression.
LightGBM.
The ROC curve shows the logistic regression model has moderate discriminatory power above random guessing, indicating some ability to distinguish defaulters from non-defaulters but with considerable room for improvement.
The classification report shows the model identifies non-defaulters well but struggles to detect actual defaults, with overall accuracy of 63.94% and notably low recall for the default class, limiting its risk detection effectiveness.



Model Evaluation
The Precision-Recall curve shows that while the model maintains high precision at low recall, precision drops as recall increases, reflecting the trade-off between capturing more defaults and maintaining accuracy in an imbalanced dataset.
The KS statistic is 0.2400 which indicates moderate discriminatory power, meaning the model can distinguish defaulters from non-defaulters with a maximum distribution difference of 24%.




Model Explainability
SHAP Values:
Global feature importance and individual prediction explanations. For example, debt_to_income, Unemployed status, and economic_cycle have a significant impact on predictions for high-risk cases.

Feature Importance: Identified features like 'credit score', 'debt to income', and 'credit history length' as key predictors.



Model Explainability
These partial dependence plots show how each feature influences the model’s predicted probability.
Credit score: Higher scores reduce predicted risk.
Debt-to-income: Higher ratios sharply increase predicted risk.
Loan amount: Slight negative effect on predicted risk.
Interest rate and expenses: Slight positive impact on predicted risk.
Income: Higher income slightly lowers predicted risk, especially at low values.




PD calibration
The calibration curve shows that the LGBM model with isotonic calibration produces predicted probabilities that closely match observed default rates, indicating strong probability calibration and reliable risk estimation.



Risk Based Strategy Simulation
The PD vs. Actual Default Rate plot shows a strong alignment between predicted probabilities and observed default rates across all deciles, indicating that the model’s risk ranking is highly accurate and well-calibrated.



Risk Based Strategy Simulation
 The distribution of applicants across risk bands reveals a heavily skewed profile, with the majority falling into the high-risk category, followed by a smaller proportion in the medium-risk band and a minimal share in the low-risk group. This imbalance indicates that most applicants have a relatively high predicted probability of default, which has 30 important implications for credit approval rates, portfolio risk, and the potential profitability of lending strategies



Risk Based Strategy Simulation
 The relationship between expected loss and the PD threshold shows a steep increase in total expected losses as the acceptance threshold moves beyond approximately 0.3, reflecting the growing inclusion of higher-risk borrowers. The curve flattens at higher thresholds, indicating that most potential losses are concentrated among applicants with moderate to high predicted default probabilities. This pattern highlights the trade-off between portfolio growth and credit risk when adjusting approval cut-offs.


Recommendations
Update Credit Policies: 
Introduce differentiated lending terms based on PD risk bands, offering competitive rates for low-risk, higher margins or collateral for medium-risk, and rejecting high-risk applications.
Expected Loss Impact: 
Reduce expected losses through risk-based pricing and early rejection of high-risk cases, as shown in simulations.
Workflow Integration: 
Embed the PD model into the loan origination system for real-time risk scoring and consistent credit decisions.
Model Stability: 
Continuously monitor and periodically recalibrate the model to maintain accuracy across customer segments and changing conditions.


